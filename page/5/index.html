<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>DK&#39;s Lab</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description">
<meta property="og:type" content="website">
<meta property="og:title" content="DK's Lab">
<meta property="og:url" content="http://blog.dk-exp.com/page/5/index.html">
<meta property="og:site_name" content="DK's Lab">
<meta property="og:description">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="DK's Lab">
<meta name="twitter:description">
  
    <link rel="alternative" href="/atom.xml" title="DK&#39;s Lab" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  <link rel="stylesheet" href="/css/style.css">
  <script src="http://libs.baidu.com/jquery/1.9.0/jquery.js"></script>
  
  <script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "//hm.baidu.com/hm.js?47d977b9cd46d5988a3e06ada67a7fa9";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script>

</head>
<body>
  <div id="container">
    <div class="left-col">
    <div class="overlay"></div>
<div class="intrude-less">
	<header id="header" class="inner">
		<a href="/" class="profilepic">
			<img lazy-src="http://dk-exp.qiniudn.com/logo.jpg" class="js-avatar">
		</a>

		<hgroup>
		  <h1 class="header-author"><a href="/">DK</a></h1>
		</hgroup>

		

		
			<div class="switch-btn">
				<div class="icon">
					<div class="icon-ctn">
						<div class="icon-wrap icon-house" data-idx="0">
							<div class="birdhouse"></div>
							<div class="birdhouse_holes"></div>
						</div>
						<div class="icon-wrap icon-ribbon hide" data-idx="1">
							<div class="ribbon"></div>
						</div>
						
						
					</div>
					
				</div>
				<div class="tips-box hide">
					<div class="tips-arrow"></div>
					<ul class="tips-inner">
						<li>菜单</li>
						<li>标签</li>
						
						
					</ul>
				</div>
			</div>
		

		<div class="switch-area">
			<div class="switch-wrap">
				<section class="switch-part switch-part1">
					<nav class="header-menu">
						<ul>
						
							<li><a href="/">主页</a></li>
				        
							<li><a href="/archives">所有文章</a></li>
				        
						</ul>
					</nav>
					<nav class="header-nav">
						<div class="social">
							
								<a class="github" target="_blank" href="https://github.com/dkmeteor" title="github">github</a>
					        
								<a class="weibo" target="_blank" href="http://weibo.com/2699012760" title="weibo">weibo</a>
					        
								<a class="rss" target="_blank" href="#" title="rss">rss</a>
					        
								<a class="zhihu" target="_blank" href="http://www.zhihu.com/people/ding-ke-53-78" title="zhihu">zhihu</a>
					        
						</div>
					</nav>
				</section>
				
				
				<section class="switch-part switch-part2">
					<div class="widget tagcloud" id="js-tagcloud">
						<a href="/tags/android/" style="font-size: 20px;">android</a> <a href="/tags/animation/" style="font-size: 10px;">animation</a> <a href="/tags/circle/" style="font-size: 10px;">circle</a> <a href="/tags/list/" style="font-size: 10px;">list</a>
					</div>
				</section>
				
				
				

				
			</div>
		</div>
	</header>				
</div>
    </div>
    <div class="mid-col">
      <nav id="mobile-nav">
  	<div class="overlay">
  		<div class="slider-trigger"></div>
  		<h1 class="header-author js-mobile-header hide">DK</h1>
  	</div>
	<div class="intrude-less">
		<header id="header" class="inner">
			<div class="profilepic">
				<img lazy-src="http://dk-exp.qiniudn.com/logo.jpg" class="js-avatar">
			</div>
			<hgroup>
			  <h1 class="header-author">DK</h1>
			</hgroup>
			
			<nav class="header-menu">
				<ul>
				
					<li><a href="/">主页</a></li>
		        
					<li><a href="/archives">所有文章</a></li>
		        
		        <div class="clearfix"></div>
				</ul>
			</nav>
			<nav class="header-nav">
				<div class="social">
					
						<a class="github" target="_blank" href="https://github.com/dkmeteor" title="github">github</a>
			        
						<a class="weibo" target="_blank" href="http://weibo.com/2699012760" title="weibo">weibo</a>
			        
						<a class="rss" target="_blank" href="#" title="rss">rss</a>
			        
						<a class="zhihu" target="_blank" href="http://www.zhihu.com/people/ding-ke-53-78" title="zhihu">zhihu</a>
			        
				</div>
			</nav>
		</header>				
	</div>
</nav>
      <div class="body-wrap">
  
    <article id="post-securerandom-changed-in-latest-android-versionmaybe-since-4-2" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2014/11/11/securerandom-changed-in-latest-android-versionmaybe-since-4-2/" class="article-date">
  	<time datetime="2014-11-10T18:13:15.000Z" itemprop="datePublished">2014-11-11</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2014/11/11/securerandom-changed-in-latest-android-versionmaybe-since-4-2/">SecureRandom changed in latest Android version(maybe since 4.2)</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>使用以前的自己写的一个AES加密工具类的时候发现跑不通了,调用会直接crash,并抛出</p>
<pre><code>11-11 09:05:16.747: W/System.err(13832): java.security.NoSuchAlgorithmException: SecureRandom AES implementation not found
</code></pre><p>源代码如下:</p>
<pre><code>import java.io.UnsupportedEncodingException;
import java.security.InvalidKeyException;
import java.security.NoSuchAlgorithmException;
import java.security.Provider;
import java.security.SecureRandom;
import java.security.Security;
import java.util.Locale;

import javax.crypto.BadPaddingException;
import javax.crypto.Cipher;
import javax.crypto.IllegalBlockSizeException;
import javax.crypto.KeyGenerator;
import javax.crypto.NoSuchPaddingException;
import javax.crypto.SecretKey;
import javax.crypto.spec.SecretKeySpec;

/**
* 
* @author Peter.Ding
* 
*/public class AESTools {
    private static AESTools instance = new AESTools();
    private String password = &quot;peter.ding@augmentum.com&quot;;
    private KeyGenerator kgen;

    private AESTools() {
    }

    public static AESTools getInstance() {
        return instance;
    }

    public String encrypt(String content) {
        try {
            kgen = KeyGenerator.getInstance(&quot;AES&quot;);
            Provider p = Security.getProvider(&quot;BC&quot;);
            SecureRandom s = SecureRandom.getInstance(&quot;AES&quot;, p);

            //The right code 
            //Provider p = Security.getProvider(&quot;Crypto&quot;); 
            //SecureRandom s = SecureRandom.getInstance(&quot;SHA1PRNG&quot;, p);

            s.setSeed(password.getBytes());
            kgen.init(128, s);
            SecretKey secretKey = kgen.generateKey();
            byte[] enCodeFormat = secretKey.getEncoded();
            SecretKeySpec key = new SecretKeySpec(enCodeFormat, &quot;AES&quot;);
            Cipher cipher = Cipher.getInstance(&quot;AES/ECB/PKCS5Padding&quot;);
            byte[] byteContent = content.getBytes(&quot;utf-8&quot;);
            cipher.init(Cipher.ENCRYPT_MODE, key);
            byte[] result = cipher.doFinal(byteContent);
            return bytesToHexString(result);
        } catch (NoSuchAlgorithmException e) {
            e.printStackTrace();
        } catch (NoSuchPaddingException e) {
            e.printStackTrace();
        } catch (UnsupportedEncodingException e) {
            e.printStackTrace();
        } catch (IllegalBlockSizeException e) {
            e.printStackTrace();
        } catch (BadPaddingException e) {
            e.printStackTrace();
        } catch (InvalidKeyException e) {
            e.printStackTrace();
        }
        return null;
    }

    public String decrypt(String str) {
        byte[] content = hexStringToByte(str);
        try {
            kgen = KeyGenerator.getInstance(&quot;AES&quot;);
            Provider p = Security.getProvider(&quot;BC&quot;);
            SecureRandom s = SecureRandom.getInstance(&quot;AES&quot;, p);

            //The right code 
            //Provider p = Security.getProvider(&quot;Crypto&quot;); 
            //SecureRandom s = SecureRandom.getInstance(&quot;SHA1PRNG&quot;, p);

            s.setSeed(password.getBytes());
            kgen.init(128, s);
            SecretKey secretKey = kgen.generateKey();
            byte[] enCodeFormat = secretKey.getEncoded();
            SecretKeySpec key = new SecretKeySpec(enCodeFormat, &quot;AES&quot;);
            Cipher cipher = Cipher.getInstance(&quot;AES/ECB/PKCS5Padding&quot;);
            cipher.init(Cipher.DECRYPT_MODE, key);
            byte[] result = cipher.doFinal(content);
            System.out.println(bytesToHexString(result));
            return new String(result, &quot;utf-8&quot;);
        } catch (NoSuchAlgorithmException e) {
            e.printStackTrace();
        } catch (NoSuchPaddingException e) {
            e.printStackTrace();
        } catch (InvalidKeyException e) {
            e.printStackTrace();
        } catch (IllegalBlockSizeException e) {
            e.printStackTrace();
        } catch (BadPaddingException e) {
            e.printStackTrace();
        } catch (UnsupportedEncodingException e) {
            e.printStackTrace();
        }
        return null;
    }

    public String bytesToHexString(byte[] src) {
        StringBuilder stringBuilder = new StringBuilder(&quot;&quot;);
        if (src == null || src.length &amp;lt;= 0) {
            return null;
        }
        for (int i = 0; i &amp;lt; src.length; i++) {
            int v = src[i] &amp;amp; 0xFF;
            String hv = Integer.toHexString(v);
            if (hv.length() &amp;lt; 2) {
                stringBuilder.append(0);
            }
            stringBuilder.append(hv);
        }
        return stringBuilder.toString().toUpperCase(Locale.ENGLISH);
    }

    public static byte[] hexStringToByte(String hex) {
        int len = (hex.length() / 2);
        byte[] result = new byte[len];
        char[] achar = hex.toCharArray();
        for (int i = 0; i &amp;lt; len; i++) {
            int pos = i * 2;
            result[i] = (byte) (toByte(achar[pos]) &amp;lt;&amp;lt; 4 | toByte(achar[pos + 1]));
        }
        return result;
    }

    private static byte toByte(char c) {
        byte b = (byte) &quot;0123456789ABCDEF&quot;.indexOf(c);
        return b;
    }

}
</code></pre><p>以上代码是我12年的时候为 加密数据库写的,我马上意识到肯定是Android又修改了Security Provider,当时2.1 2.3适配把我坑了一次,4.0适配又把我坑了一次,没想到还要坑我第三次…..无语…</p>
<pre><code>Provider p = Security.getProvider(&quot;BC&quot;);
SecureRandom s = SecureRandom.getInstance(&quot;AES&quot;, p);
</code></pre><p>报错的就是上面这行代码,果断复制粘贴百度</p>
<p>结果搜出来结果就是这个 <a href="http://dkmeteor.iteye.com/blog/1394887" target="_blank" rel="external">http://dkmeteor.iteye.com/blog/1394887</a></p>
<p>仔细一看还是我2012年写的blog…. 算了….不看也知道肯定是 Provider和SecureRandom又改动了…</p>
<p>直接拉Provider列表</p>
<pre><code>Android&apos;s OpenSSL-backed security provider
1ASN.1, DER, PkiPath, PKCS7
BouncyCastle Security Provider v1.49
HARMONY (SHA1 digest; SecureRandom; SHA1withDSA signature)
Harmony JSSE Provider
Android KeyStore security provider
</code></pre><p><a href="http://www.bouncycastle.org/" target="_blank" rel="external">http://www.bouncycastle.org/</a> 翻了一下文档 <code>BouncyCastle</code> 是支持AES的,不知为何直接调用会抛NoSuchAlgorithmException 没看到关于Android内Provider支持的Algorithm具体列表.</p>
<p>试了下使用 Android OpenSSL (2.3以下版本不支持) , 一样会抛出该错误,最后想了想改成原始版本的默认值 SHA1PRNG和Crypto. Done. (2.3+版本默认Default Provider修改成了 Android OpenSSL)</p>
<hr>
<p>后来又找到一篇 Security Enhancements in Jelly Bean 的文档</p>
<p><a href="http://android-developers.blogspot.com/2013/02/security-enhancements-in-jelly-bean.html" target="_blank" rel="external">http://android-developers.blogspot.com/2013/02/security-enhancements-in-jelly-bean.html</a></p>
<p>原文在墙外,关键部分我复制保存以下</p>
<blockquote>
<p>New implementation of SecureRandom</p>
<p>Android 4.2 includes a new default implementation of SecureRandom based on OpenSSL. In the older Bouncy Castle-based implementation, given a known seed, SecureRandom could technically (albeit incorrectly) be treated as a source of deterministic data. With the new OpenSSL-based implementation, this is no longer possible.</p>
<p>In general, the switch to the new SecureRandom implementation should be transparent to apps. However, if your app is relying on SecureRandom to generate deterministic data, such as keys for encrypting data, you may need to modify this area of your app. For example, if you have been using SecureRandom to retrieve keys for encrypting/decrypting content, you will need to find another means of doing that.</p>
<p>A recommended approach is to generate a truly random AES key upon first launch and store that key in internal storage. For more information, see the post “Using Cryptography to Store Credentials Safely”.<br>还有另一篇关于 最佳实践的</p>
</blockquote>
<p><a href="http://android-developers.blogspot.com/2013/02/using-cryptography-to-store-credentials.html" target="_blank" rel="external">http://android-developers.blogspot.com/2013/02/using-cryptography-to-store-credentials.html</a></p>
<p>&nbsp;</p>
<blockquote>
<p>The right way</p>
<p>A more reasonable approach is simply to generate a truly random AES key when an application is first launched:</p>
<p>public static SecretKey generateKey() throws NoSuchAlgorithmException {<br>// Generate a 256-bit key<br>final int outputKeyLength = 256;</p>
<p>SecureRandom secureRandom = new SecureRandom();<br>// Do <em>not</em> seed secureRandom! Automatically seeded from system entropy.<br>KeyGenerator keyGenerator = KeyGenerator.getInstance(“AES”);<br>keyGenerator.init(outputKeyLength, secureRandom);<br>SecretKey key = keyGenerator.generateKey();<br>return key;<br>}<br>Note that the security of this approach relies on safeguarding the generated key, which is is predicated on the security of the internal storage. Leaving the target file unencrypted (but set to MODE_PRIVATE) would provide similar security.</p>
<p>Even more security<br>If your app needs additional encryption, a recommended approach is to require a passphase or PIN to access your application. This passphrase could be fed into PBKDF2 to generate the encryption key. (PBKDF2 is a commonly used algorithm for deriving key material from a passphrase, using a technique known as “key stretching”.) Android provides an implementation of this algorithm inside SecretKeyFactory as PBKDF2WithHmacSHA1:</p>
<p>public static SecretKey generateKey(char[] passphraseOrPin, byte[] salt) throws NoSuchAlgorithmException, InvalidKeySpecException {<br>// Number of PBKDF2 hardening rounds to use. Larger values increase<br>// computation time. You should select a value that causes computation<br>// to take &gt;100ms.<br>final int iterations = 1000;</p>
<p>// Generate a 256-bit key<br>final int outputKeyLength = 256;</p>
<p>SecretKeyFactory secretKeyFactory = SecretKeyFactory.getInstance(“PBKDF2WithHmacSHA1”);<br>KeySpec keySpec = new PBEKeySpec(passphraseOrPin, salt, iterations, outputKeyLength);<br>SecretKey secretKey = secretKeyFactory.generateSecret(keySpec);<br>return secretKey;<br>}<br>The salt should be a random string, again generated using SecureRandom and persisted on internal storage alongside any encrypted data. This is important to mitigate the risk of attackers using a rainbow table to precompute password hashes.<br>因为使用了固定的seed作为随机种子生成器(RNG)的参数,导致生成的随机数其实是固定的,所以官方不推荐这种用法,当然我类库里的seed其实就是 加密密码,如果不需要指定密码的话, 倒是可以用官方的推荐的这种方式.</p>
</blockquote>
<p></p>
<p>&nbsp;</p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-category tagcloud">
	<a class="article-category-link" href="/categories/android/">android</a>
	</div>


      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>






  
    <article id="post-manifest-xml-bug-with-android-intent-action-main" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2014/11/10/manifest-xml-bug-with-android-intent-action-main/" class="article-date">
  	<time datetime="2014-11-10T09:07:07.000Z" itemprop="datePublished">2014-11-10</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2014/11/10/manifest-xml-bug-with-android-intent-action-main/">manifest xml bug with android.intent.action.MAIN</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="manifest-xml-bug"><a href="#manifest-xml-bug" class="headerlink" title="manifest xml bug"></a>manifest xml bug</h1><p>使用如下配置</p>
<pre><code>&lt;intent-filter&gt;
    &lt;action android:name=“android.intent.action.VIEW” /&gt;
    &lt;action android:name=“android.intent.action.MAIN” /&gt;
    &lt;category android:name=“android.intent.category.LAUNCHER” /&gt;
&lt;/intent-filter&gt;
</code></pre><p>在Eclipse上Run, 可以正常安装,并启动应用 若使用下面这个配置(只是调换了VIEW和MAIN的顺序)</p>
<pre><code>&lt;intent-filter&gt;
    &lt;action android:name=“android.intent.action.MAIN” /&gt;
    &lt;action android:name=“android.intent.action.VIEW” /&gt;
    &lt;category android:name=“android.intent.category.LAUNCHER” /&gt;
&lt;/intent-filter&gt;
</code></pre><p>在Eclipse上Run后,提示</p>
<p>“No Launcher activity found!</p>
<p>The launch will only sync the application package on the device!”</p>
<p>虽然也能安装成功,但是程序不会自动启动</p>
<p>——————————————————————————-</p>
<p>目测是Eclipse自身的bug, 蛋疼.</p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-category tagcloud">
	<a class="article-category-link" href="/categories/android/">android</a>
	</div>


      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>






  
    <article id="post-googlemap-without-google-play-service" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2014/10/13/googlemap-without-google-play-service/" class="article-date">
  	<time datetime="2014-10-13T09:08:57.000Z" itemprop="datePublished">2014-10-13</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2014/10/13/googlemap-without-google-play-service/">GoogleMap without Google Play Service</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>今天在QQ群里看到有人研究 地图的问题.</p>
<p>目前由于 国内阉割 Google Play Service的问题，大部分解决方案是</p>
<p>国内相关的 用 百度地图</p>
<p>国外相关的 用 Google地图</p>
<p>然后分开处理………..</p>
<p>然后有人提到 携程 的app可以在没有 Google Play Service的情况下调起Google Map</p>
<p>于是专门下载下来测试了一下，确实可以。</p>
<p>但是使用 UI Automator 把View Tree拉下来的看的时候</p>
<p>很明显可以发现这其实是一个 WebView</p>
<p><img src="/images/uiautomator-xiecheng.jpg" alt="uiautomator-xiecheng"></p>
<p>所以猜测携程 其实通过WebView调用移动版Google地图的方式使用的Google Map.</p>
<p>不过这样就要走js去控制这里面的逻辑………..不过也可能是Server端做好了直接载入进来的…</p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-category tagcloud">
	<a class="article-category-link" href="/categories/Blog/">Blog</a>
	</div>


      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>






  
    <article id="post-chromeos-apk" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2014/10/09/chromeos-apk/" class="article-date">
  	<time datetime="2014-10-09T08:55:06.000Z" itemprop="datePublished">2014-10-09</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2014/10/09/chromeos-apk/">chromeos-apk</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <p><img src="/images/arc-2048.jpg" alt="2048"></p>
<p><img src="/images/ARChon.jpg" alt="arc"></p>
<p>换了一个64位ARC以后 终于跑起来了</p>
<p>明天去把公司的环境也重新弄一下……</p>
<p>比AVD性能好很多，明天试试Debug 和 logcat能不能连上。</p>
<p>目前已知依赖Google play service的应用转换后都无法运行</p>
<p>依赖NDK的部分应用运行不正常。</p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-category tagcloud">
	<a class="article-category-link" href="/categories/Blog/">Blog</a>
	</div>


      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>






  
    <article id="post-OJ-1511" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2014/09/26/OJ-1511/" class="article-date">
  	<time datetime="2014-09-26T00:00:09.000Z" itemprop="datePublished">2014-09-26</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2014/09/26/OJ-1511/">九度OJ 题目1511：从尾到头打印链表</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>#题目1511：从尾到头打印链表`</p>
<p><code>**时间限制：**1 秒</code></p>
<p><code>**内存限制：**128 兆</code></p>
<p><code>**特殊判题：**否</code></p>
<p><code>**提交：**4073</code></p>
<p><code>**解决：**1255</code></p>
<p>题目描述输入一个链表，从尾到头打印链表每个节点的值。</p>
<p><strong>输入：</strong></p>
<p>每个输入文件仅包含一组测试样例。<br>每一组测试案例包含多行，每行一个大于0的整数，代表一个链表的节点。第一行是链表第一个节点的值，依次类推。当输入到-1时代表链表输入完毕。-1本身不属于链表。<code>&lt;/dd&gt;&lt;/dl&gt;&lt;dl&gt;&lt;dt&gt;</code><strong>输出：</strong><code>&lt;/dt&gt;&lt;dd&gt;</code>对应每个测试案例，以从尾到头的顺序输出链表每个节点的值，每个值占一行。<code>&lt;/dd&gt;&lt;/dl&gt;&lt;dl&gt;&lt;dt&gt;</code><strong>样例输入：</strong>`<dd></dd></p>
<pre><code>1
2
3
4
5
-1


**样例输出：**
5
4
3
2
1
</code></pre><p><code>AC Code:</code></p>
<pre><code>#include &amp;lt;iostream&amp;gt;
#include &amp;lt;stdio.h&amp;gt;

using namespace std;

struct Node
{
    int value;
    Node* prev;
    Node* next;
};

int main()
{
    int i;
    Node *head;
    Node *prev=NULL;
    Node *p;
    while(scanf(&quot;%d&quot;,&amp;amp;i)!=EOF)
    {
        if(i==-1)
        {
            break;
        }
        p =new Node();
        p-&amp;gt;value=i;
        p-&amp;gt;prev=prev;
        if(prev!=NULL)
            prev-&amp;gt;next=p;

        prev=p;
    }

    while(1)
    {
        printf(&quot;%d\n&quot;,p-&amp;gt;value);
        if(p-&amp;gt;prev==NULL)
            break;
        p=p-&amp;gt;prev;
    }
    return 0;
}
</code></pre><hr>
<pre><code>/**************************************************************
    Problem: 1511
    User: dkmeteor
    Language: C++
    Result: Accepted
    Time:90 ms
    Memory:4556 kb
****************************************************************/
</code></pre><p>&nbsp;</p>
<p></p>
<div style="color: #333333;"><code> </code></div>

<div style="color: #333333;"><code>构建了一个双向链表来完成逆序功能</code></div>

<div style="color: #333333;"></div>

<div style="color: #333333;">顺便这鸟题目  OJ原标题是 从头到尾……题干里却是从尾到头</div>
      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-category tagcloud">
	<a class="article-category-link" href="/categories/Algorithm/">Algorithm</a>
	</div>


      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>






  
    <article id="post-OJ-1510" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2014/09/26/OJ-1510/" class="article-date">
  	<time datetime="2014-09-25T22:21:54.000Z" itemprop="datePublished">2014-09-26</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2014/09/26/OJ-1510/">九度OJ 题目1510：替换空格</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>题目1510：替换空格<br>时间限制：1 秒<br>内存限制：128 兆<br>特殊判题：否<br>提交：6687<br>解决：1722<br>题目描述：请实现一个函数，将一个字符串中的空格替换成“%20”。例如，当字符串为We Are Happy.则经过替换之后的字符串为We%20Are%20Happy。</p>
<p>输入：每个输入文件仅包含一组测试样例。<br>对于每组测试案例，输入一行代表要处理的字符串。</p>
<p>输出：对应每个测试案例，出经过处理后的字符串。</p>
<p>样例输入：<br>We Are Happy</p>
<p>样例输出：<br>We%20Are%20Happy</p>
<p>AC code:</p>
<pre><code>include &amp;lt;iostream&amp;gt;
#include &amp;lt;stdio.h&amp;gt;

using namespace std;

int main()
{
    string str;
    getline (cin,str);
    int i=0;

    string result;
    while(str.c_str()[i]!=-1)
    {
        if(str.c_str()[i]!=&apos; &apos;)
            result+=(str.c_str()[i]);
        else
            result.append(&quot;%20&quot;);
        i++;
    }
    printf(&quot;%s&quot;,result.c_str());
    //printf(&quot;%d&quot;,i);
    return 0;
}
</code></pre><hr>
<pre><code>Problem: 1510
User: dkmeteor
Language: C++
Result: Accepted
Time:30 ms
Memory:2536 kb
</code></pre><p>题目本身很简单<br>主要时间花在搜索怎么读入带空格的字符串,用scanf调了半天..最后放弃了…还是用getLine直接读整行了</p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-category tagcloud">
	<a class="article-category-link" href="/categories/Algorithm/">Algorithm</a>
	</div>


      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>






  
    <article id="post-OJ-1384" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2014/09/24/OJ-1384/" class="article-date">
  	<time datetime="2014-09-23T18:52:48.000Z" itemprop="datePublished">2014-09-24</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2014/09/24/OJ-1384/">九度OJ 题目1384：二维数组中的查找</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <p><a href="http://ac.jobdu.com/problem.php?pid=1384" target="_blank" rel="external">http://ac.jobdu.com/problem.php?pid=1384</a></p>
<p>题目描述：在一个二维数组中，每一行都按照从左到右递增的顺序排序，每一列都按照从上到下递增的顺序排序。请完成一个函数，输入这样的一个二维数组和一个整数，判断数组中是否含有该整数。</p>
<p>输入：输入可能包含多个测试样例，对于每个测试案例，<br>输入的第一行为两个整数m和n(1&lt;=m,n&lt;=1000)：代表将要输入的矩阵的行数和列数。<br>输入的第二行包括一个整数t(1&lt;=t&lt;=1000000)：代表要查找的数字。<br>接下来的m行，每行有n个数，代表题目所给出的m行n列的矩阵(矩阵如题目描述所示，每一行都按照从左到右递增的顺序排序，每一列都按照从上到下递增的顺序排序。</p>
<p>输出：对应每个测试案例，<br>输出”Yes”代表在二维数组中找到了数字t。<br>输出”No”代表在二维数组中没有找到数字t。</p>
<p>样例输入：<br>3 3<br>5<br>1 2 3<br>4 5 6<br>7 8 9<br>3 3<br>1<br>2 3 4<br>5 6 7<br>8 9 10<br>3 3<br>12<br>2 3 4<br>5 6 7<br>8 9 10</p>
<p>样例输出：<br>Yes<br>No<br>No</p>
<p>答疑：解题遇到问题?分享解题心得?讨论本题请访问：<a href="http://t.jobdu.com/thread-8107-1-1.html" target="_blank" rel="external">http://t.jobdu.com/thread-8107-1-1.html</a></p>
<p>AC Code:</p>
<p>#include &lt;stdio.h&gt;</p>
<p>using namespace std;</p>
<p>int main()<br>{<br>    int rows,cols;<br>     while (scanf(“%d %d”, &amp;rows, &amp;cols) != EOF)<br>    {<br>        int find;<br>        scanf(“%d”, &amp;find);</p>
<pre><code>    int ** arr = new int *[rows];
    for (int r = 0; r &amp;lt; rows; r ++)
    {
        arr[r] = new int [cols];
        for (int c = 0; c &amp;lt; cols; c ++)
        {
            scanf(&quot;%d&quot;, &amp;amp;arr[r][c]);
        }
    }

    if(find &amp;lt;arr[0][0] || find&amp;gt;arr[rows-1][cols-1])
    {
        printf(&quot;%s&quot;, &quot;No\n&quot;);
    }
    else
    {
        bool flag_find=0;
        for(int i=0;i&amp;lt;rows &amp;amp;&amp;amp; !flag_find;i++)
        {
            if(find&amp;lt;arr[i][0])
            {
                for(int j=0;j&amp;lt;cols &amp;amp;&amp;amp; !flag_find;j++)
                {
                    if(find==arr[i-1][j])
                    {
                        flag_find=1;
                        break;
                    }
                }
                break;
            }
        }

        for(int j=0;j&amp;lt;cols &amp;amp;&amp;amp; !flag_find;j++)
        {
            if(find==arr[rows-1][j])
            {
                flag_find=1;
            }
        }

    if(flag_find)
    {
        printf(&quot;%s&quot;, &quot;Yes\n&quot;);
    }
    else
     {
        printf(&quot;%s&quot;, &quot;No\n&quot;);
     }
    }

    for(int j = 0; j &amp;lt; rows; j++)
        delete arr[j];
    delete arr;

}

return 0;
</code></pre><p>}</p>
<hr>
<pre><code>Problem: 1384
User: dkmeteor
Language: C++
Result: Accepted
Time:700 ms
Memory:4852 kb
</code></pre><p>TODO:<br>第一次用OJ,用最简单的写法做个测试,等会更新下二分查找.</p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-category tagcloud">
	<a class="article-category-link" href="/categories/Algorithm/">Algorithm</a>
	</div>


      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>






  
    <article id="post-bither" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2014/08/27/bither/" class="article-date">
  	<time datetime="2014-08-27T00:08:51.000Z" itemprop="datePublished">2014-08-27</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2014/08/27/bither/">Bither </a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>bither:</p>
<p><img src="/images/bither-bither.jpg" alt="bither"></p>
<p>android:</p>
<p><img src="/images/bither-android.jpg" alt="android"></p>
<p>Enlarge image with <strong>3200%</strong> , the bither-android-jpeg is more smooth.</p>
<p>肉眼比较难看出区别，不过确实使用bither重编译的jpeg lib compress出的图片质量更高。</p>
<p><a href="https://github.com/bither/bither-android" target="_blank" rel="external">https://github.com/bither/bither-android</a></p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-category tagcloud">
	<a class="article-category-link" href="/categories/android/">android</a>
	</div>


      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>






  
    <article id="post-bubble-notification" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2014/08/26/bubble-notification/" class="article-date">
  	<time datetime="2014-08-26T06:15:25.000Z" itemprop="datePublished">2014-08-26</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2014/08/26/bubble-notification/">Bubble Notification</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <p><a href="https://android-arsenal.com/details/1/875" target="_blank" rel="external"><img src="https://img.shields.io/badge/Android%20Arsenal-Bubble--Notification-brightgreen.svg?style=flat" alt="Android Arsenal"></a></p>
<h1 id="Demo"><a href="#Demo" class="headerlink" title="Demo"></a>Demo</h1><p><img src="/images/bubble-notification.gif" alt="Examples list"></p>
<p>Effect like QQ 5.0 and add an explosion animation.</p>
<h1 id="How-to-use"><a href="#How-to-use" class="headerlink" title="How to use"></a>How to use</h1><pre><code>&amp;lt;com.dk.view.drop.WaterDrop
    android:id=&quot;@+id/drop&quot;
    android:layout_width=&quot;25dp&quot;
    android:layout_height=&quot;25dp&quot;
    android:gravity=&quot;center_vertical&quot; /&amp;gt;

WaterDrop drop = (WaterDrop) convertView.findViewById(R.id.drop);
    drop.setText(String.valueOf(position));
    drop.setOnDragCompeteListener(new OnDragCompeteListener() {

            @Override
            public void onDrag() {
                Toast.makeText(MainActivity.this, &quot;remove:&quot; + position,
                        Toast.LENGTH_SHORT).show();
            }
        });
</code></pre><h1 id="TODO"><a href="#TODO" class="headerlink" title="TODO"></a>TODO</h1><p>1.The line is not smooth , I’d refine it soon.</p>
<p>2.Support several different styles.</p>
<h2 id="License"><a href="#License" class="headerlink" title="License"></a>License</h2><p>Copyright (c) 2014 <a href="http://dk-exp.com" target="_blank" rel="external">Dean Ding</a></p>
<p>Licensed under the <a href="http://www.apache.org/licenses/LICENSE-2.0.html" target="_blank" rel="external">Apache License, Version 2.0</a></p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-category tagcloud">
	<a class="article-category-link" href="/categories/android/">android</a>
	</div>


      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>






  
    <article id="post-smoothswitch" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2014/08/12/smoothswitch/" class="article-date">
  	<time datetime="2014-08-12T06:38:58.000Z" itemprop="datePublished">2014-08-12</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2014/08/12/smoothswitch/">SmoothSwitch</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id=""><a href="#" class="headerlink" title=""></a><img src="/images/SmoothTransition_big.gif" alt="demo"></h2><p>Smooth activity switch animation.</p>
<p>You can get all these animation by just one line:</p>
<pre><code>new SwitchAnimationUtil().startAnimation(getWindow().getDecorView(), AnimationType.SCALE);
</code></pre>
      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-category tagcloud">
	<a class="article-category-link" href="/categories/android/">android</a>
	</div>


      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>






  
  
    <nav id="page-nav">
      <a class="extend prev" rel="prev" href="/page/4/">&laquo; Prev</a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/3/">3</a><a class="page-number" href="/page/4/">4</a><span class="page-number current">5</span><a class="page-number" href="/page/6/">6</a><a class="extend next" rel="next" href="/page/6/">Next &raquo;</a>
    </nav>
  
</div>
      <footer id="footer">
  <div class="outer">
    <div id="footer-info">
    	<div class="footer-left">
    		&copy; 2016 DK
    	</div>
      	<div class="footer-right">
      		<a href="http://hexo.io/" target="_blank">Hexo</a>  Theme <a href="https://github.com/litten/hexo-theme-yilia" target="_blank">Yilia</a> by Litten
      	</div>
    </div>
  </div>
</footer>
    </div>
    
  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/mobile.js"></script>
<script src="/js/main.js"></script>





<! -- mathjax config similar to math.stackexchange -->

<script type="text/x-mathjax-config">
MathJax.Hub.Config({
    tex2jax: {
        inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
        processEscapes: true,
        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
    }
});

MathJax.Hub.Queue(function() {
    var all = MathJax.Hub.getAllJax(), i;
    for(i=0; i < all.length; i += 1) {
        all[i].SourceElement().parentNode.className += ' has-jax';                 
    }       
});
</script>

<script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>



  </div>
</body>
</html>